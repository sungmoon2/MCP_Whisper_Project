#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
더 긴 TTS 파일 생성 스크립트 - Whisper 성능 테스트용
다양한 길이와 복잡도의 한국어 회의 내용을 생성
"""

from gtts import gTTS
import os
import time

def create_long_meeting_text():
    """더 긴 회의 시나리오 텍스트 생성 (약 3-5분 분량)"""
    
    meeting_content = """
    안녕하세요. 오늘 회의를 시작하겠습니다. 저는 프로젝트 매니저 김민수입니다. 
    오늘은 2025년 6월 6일이고, 우리 인공지능 프로젝트의 중간 점검 회의입니다.

    먼저 지난주 진행 상황을 점검해보겠습니다. 
    개발팀에서는 자연어 처리 모델의 정확도를 85퍼센트에서 92퍼센트로 향상시켰습니다. 
    이는 예상보다 일주일 빠른 성과입니다.

    데이터 사이언스 팀에서는 새로운 데이터셋 수집이 완료되었습니다. 
    총 50만 건의 한국어 음성 데이터와 30만 건의 텍스트 데이터를 확보했습니다.
    품질 검증은 다음 주 화요일까지 완료될 예정입니다.

    이제 각 팀별로 보고를 받겠습니다. 먼저 기술팀 이영희 팀장님 말씀해 주세요.

    네, 안녕하세요. 기술팀 이영희입니다. 
    지난주에는 주로 시스템 아키텍처 최적화에 집중했습니다.
    클라우드 인프라 비용을 월 500만원에서 350만원으로 30퍼센트 절감했습니다.
    성능은 오히려 15퍼센트 향상되었습니다.

    다음 주에는 보안 강화 작업을 진행할 예정입니다.
    OAuth 2.0 인증 시스템과 데이터 암호화를 도입합니다.
    예상 완료일은 6월 15일입니다.

    고생하셨습니다. 이제 마케팅팀 박철수 부장님 보고 부탁드립니다.

    네, 마케팅팀 박철수입니다.
    고객 피드백 수집이 완료되었습니다. 총 1,200명의 베타 테스터로부터 응답을 받았습니다.
    만족도는 평균 4.2점으로 목표인 4.0점을 초과했습니다.

    주요 개선 요청사항은 다음과 같습니다.
    첫째, 음성 인식 속도 향상. 현재 평균 3초에서 2초 이내로 단축 요청.
    둘째, 더 많은 언어 지원. 영어, 중국어, 일본어 추가 요청이 많았습니다.
    셋째, 모바일 앱 사용성 개선. 특히 아이폰 사용자들의 불편 사항이 많았습니다.

    다음 주에는 새로운 마케팅 캠페인을 시작합니다.
    유튜브와 인스타그램 광고를 통해 젊은 층 타겟팅을 강화할 예정입니다.
    예산은 월 200만원이고, 목표 신규 가입자는 5,000명입니다.

    감사합니다. 이제 재무팀 최지영 팀장님 보고해 주세요.

    네, 재무팀 최지영입니다.
    2분기 재무 현황을 보고드리겠습니다.
    매출은 전년 동기 대비 35퍼센트 증가한 12억원을 기록했습니다.
    순이익은 2억 8천만원으로 목표 대비 110퍼센트 달성했습니다.

    주요 비용 항목을 살펴보면,
    인건비가 전체의 45퍼센트인 5억 4천만원,
    클라우드 및 인프라 비용이 20퍼센트인 2억 4천만원,
    마케팅 비용이 15퍼센트인 1억 8천만원입니다.

    다음 분기 예산 계획입니다.
    연구개발비를 30퍼센트 증액하여 월 1억원으로 확대합니다.
    신규 인력 채용을 위한 예산도 확보했습니다.
    개발자 5명, 디자이너 2명, 마케터 1명을 추가 채용할 예정입니다.

    이제 중요한 일정들을 정리하겠습니다.

    6월 10일 월요일 오전 10시, 클라이언트 ABC 컴퍼니와 최종 계약 미팅이 있습니다.
    모든 팀장님들은 필수 참석해 주세요. 장소는 강남역 삼성동 오피스텔 회의실입니다.

    6월 15일 토요일, 다음 스프린트가 시작됩니다.
    새로운 기능 개발과 기존 버그 수정을 병행 진행합니다.
    스프린트 기간은 3주이고, 7월 6일에 종료됩니다.

    6월 20일 목요일 오후 2시, 프로젝트 진행상황 중간 점검 미팅이 있습니다.
    이번에는 외부 컨설턴트도 참여하여 객관적인 평가를 받을 예정입니다.

    6월 25일 화요일, 고객사 방문 데모 시연이 있습니다.
    시연용 프로토타입 준비는 기술팀에서 담당해 주세요.
    프레젠테이션은 마케팅팀에서 준비하겠습니다.

    7월 1일부터 3일까지, 개발자 컨퍼런스 참가가 예정되어 있습니다.
    부산 벡스코에서 열리는 AI 개발자 포럼입니다.
    우리 회사에서는 기술팀 3명이 참석할 예정입니다.

    추가적으로 해결해야 할 이슈들을 논의하겠습니다.

    첫 번째, 서버 과부하 문제입니다.
    최근 사용자 증가로 인해 서버 응답 시간이 느려지고 있습니다.
    긴급히 서버 증설이 필요한 상황입니다.
    예상 비용은 월 추가 300만원이고, 이번 주 내로 결정해야 합니다.

    두 번째, 개인정보보호법 대응 이슈입니다.
    새로운 규정에 맞춰 개인정보 처리 방침을 수정해야 합니다.
    법무팀과 협의하여 다음 주까지 초안을 작성하겠습니다.

    세 번째, 경쟁사 분석 결과 공유입니다.
    주요 경쟁사인 테크이노베이션과 AI솔루션스의 최신 동향을 분석했습니다.
    그들의 신제품 출시 일정과 가격 정책을 면밀히 모니터링하고 있습니다.

    마지막으로 다음 회의 일정을 잡겠습니다.
    다음 주 회의는 6월 13일 금요일 오후 3시로 예정되어 있습니다.
    주제는 3분기 사업 계획 수립입니다.

    오늘 회의에서 논의된 모든 사항은 회의록으로 정리되어 이메일로 발송됩니다.
    각자 맡은 업무는 반드시 일정에 맞춰 진행해 주시기 바랍니다.

    질문이나 건의사항이 있으시면 언제든지 연락해 주세요.
    오늘 수고하셨고, 회의를 마치겠습니다. 감사합니다.
    """
    
    return meeting_content.strip()

def create_medium_meeting_text():
    """중간 길이 회의 시나리오 텍스트 생성 (약 1-2분 분량)"""
    
    meeting_content = """
    안녕하세요. 주간 팀 미팅을 시작하겠습니다.

    먼저 이번 주 목표 달성률을 확인해보겠습니다.
    개발팀은 계획 대비 95퍼센트 진행되었고, 디자인팀은 105퍼센트 완료했습니다.
    전체적으로 양호한 진행 상황입니다.

    중요한 일정 알림드립니다.
    다음 주 화요일 6월 11일 오후 2시에 고객 미팅이 있습니다.
    참석자는 프로젝트 매니저와 개발 리더입니다.
    미팅 장소는 클라이언트 오피스 3층 회의실입니다.

    6월 18일 수요일에는 분기별 성과 발표가 있습니다.
    각 팀에서 준비해야 할 자료 목록을 이메일로 발송하겠습니다.

    기술적 이슈 하나 공유드립니다.
    API 응답 속도가 평소보다 20퍼센트 느려졌습니다.
    원인 분석 후 이번 주 내로 해결하겠습니다.

    예산 관련해서는 월 클라우드 비용이 예상보다 10퍼센트 증가했습니다.
    최적화 작업을 통해 다음 달부터는 정상화될 예정입니다.

    다음 회의는 6월 13일 금요일 오전 10시입니다.
    오늘 회의는 여기서 마치겠습니다. 수고하셨습니다.
    """
    
    return meeting_content.strip()

def create_tts_files():
    """다양한 길이의 TTS 파일들 생성"""
    
    files_to_create = [
        {
            "name": "long_meeting_korean",
            "text": create_long_meeting_text(),
            "description": "긴 회의 (3-5분)"
        },
        {
            "name": "medium_meeting_korean", 
            "text": create_medium_meeting_text(),
            "description": "중간 회의 (1-2분)"
        }
    ]
    
    print("=== TTS 파일 생성 시작 ===")
    
    for file_info in files_to_create:
        print(f"\n📄 {file_info['description']} 생성 중...")
        print(f"파일명: {file_info['name']}.mp3")
        
        try:
            # 시간 측정 시작
            start_time = time.time()
            
            # gTTS 객체 생성 (한국어)
            tts = gTTS(text=file_info['text'], lang='ko', slow=False)
            
            # MP3 파일로 저장
            output_file = f"{file_info['name']}.mp3"
            tts.save(output_file)
            
            # 시간 측정 종료
            end_time = time.time()
            
            # 파일 크기 확인
            file_size = os.path.getsize(output_file)
            
            print(f"✅ 생성 완료!")
            print(f"   파일 크기: {file_size:,} bytes ({file_size/1024:.1f} KB)")
            print(f"   생성 시간: {end_time - start_time:.2f}초")
            print(f"   텍스트 길이: {len(file_info['text'])}자")
            
        except Exception as e:
            print(f"❌ 오류 발생: {e}")
    
    print(f"\n📁 생성된 파일 목록:")
    for file_info in files_to_create:
        filename = f"{file_info['name']}.mp3"
        if os.path.exists(filename):
            size = os.path.getsize(filename)
            print(f"   {filename} ({size/1024:.1f} KB)")

if __name__ == "__main__":
    print("🎤 더 긴 TTS 파일 생성 스크립트")
    print("=" * 50)
    
    create_tts_files()
    
    print(f"\n🎯 다음 단계:")
    print("1. whisper [파일명].mp3 --language Korean --device cuda --model [모델명]")
    print("2. 모델별 성능 비교 (tiny, base, small, medium, large-v3, large-v3-turbo)")
    print("3. 처리 시간 및 정확도 측정")
